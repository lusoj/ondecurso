<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OndeCurso - Organizador de Cronograma UBA</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        /* Estilos gerais para o corpo e cont√™iner principal */
        body {
            font-family: 'Inter', sans-serif;
            @apply bg-gradient-to-br from-blue-100 to-indigo-200 text-gray-800;
        }
        .container {
            @apply max-w-7xl mx-auto p-4 sm:p-6;
        }
        /* Estilo para cart√µes e se√ß√µes principais */
        .card {
            @apply bg-white rounded-xl shadow-2xl p-6 mb-8 border border-indigo-200;
        }
        /* Estilos para tabelas de cursadas */
        .course-table {
            @apply w-full table-auto border-collapse;
        }
        .course-table th, .course-table td {
            @apply px-3 py-2 text-left text-sm;
        }
        .course-table th {
            @apply bg-indigo-100 text-indigo-800 font-semibold uppercase tracking-wider;
        }
        .course-table tbody tr {
            @apply border-b border-gray-200 hover:bg-gray-50;
        }
        .course-table tbody tr:last-child {
            @apply border-b-0;
        }
        /* Destaque para linhas selecionadas (verde) e com conflito (vermelho) */
        .course-table tbody tr.selected {
            @apply bg-green-100 border-green-300;
        }
        .course-table tbody tr.conflict {
            @apply bg-red-100 border-red-300;
        }
        /* Estilos para bot√µes de a√ß√£o (Selecionar/Remover) */
        .add-button {
            @apply bg-indigo-500 hover:bg-indigo-600 text-white font-bold py-1.5 px-3 rounded-lg shadow-md transition-colors duration-200 text-sm;
        }
        .add-button:disabled {
            @apply bg-gray-300 cursor-not-allowed;
        }
        .remove-button {
            @apply bg-red-500 hover:bg-red-600 text-white font-bold py-1 px-2 rounded-lg shadow-sm transition-colors duration-200 text-xs;
        }
        /* Estilo para o cart√£o de cursadas selecionadas */
        .selected-courses-card {
            @apply bg-blue-50 p-4 rounded-lg border border-blue-200 shadow-inner;
        }
        /* Estilo para a mensagem de conflito */
        .conflict-message {
            @apply text-red-700 font-semibold text-xs mt-1;
        }
        /* Estilo para o bot√£o de otimiza√ß√£o */
        .optimize-button {
            @apply bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded-lg shadow-lg transition-colors duration-200 text-base mt-4;
        }
        /* Estilo para o seletor de prefer√™ncia */
        .preference-select {
            @apply block w-full text-sm border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Cabe√ßalho do site -->
        <header class="card text-center bg-indigo-700 text-white">
            <h1 class="text-3xl sm:text-4xl font-bold mb-2">OndeCurso - Organizador de Cronograma UBA üéì</h1>
            <p class="text-lg sm:text-xl opacity-90">Organize suas cursadas e visualize conflitos!</p>
        </header>

        <main>
            <!-- Se√ß√£o principal de cursadas dispon√≠veis -->
            <section id="coursesContent" class="card">
                <h2 class="text-2xl font-semibold text-indigo-700 mb-4">Cursadas Dispon√≠veis</h2>

                <!-- Bot√£o para Gerar Cronograma Otimizado -->
                <div class="text-center mb-6">
                    <button id="optimizeScheduleButton" class="optimize-button">
                        Gerar Cronograma Otimizado
                    </button>
                    <div id="optimizationStatus" class="mt-4 p-3 rounded-lg text-center text-sm font-semibold">
                        <!-- Mensagens de status da otimiza√ß√£o ser√£o exibidas aqui -->
                    </div>
                </div>

                <!-- Filtro por Mat√©ria -->
                <div id="filterBySubject" class="mb-6">
                    <label for="subjectSelect" class="block text-lg font-medium text-gray-700 mb-2">Selecione uma mat√©ria:</label>
                    <select id="subjectSelect" class="mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md shadow-sm">
                        <option value="">-- Selecione uma Mat√©ria --</option>
                        <!-- As op√ß√µes de mat√©ria ser√£o preenchidas via JavaScript -->
                    </select>
                </div>

                <!-- Tabela de Cursadas Dispon√≠veis -->
                <div class="overflow-x-auto">
                    <table id="courseListTable" class="course-table">
                        <thead>
                            <tr>
                                <th>Mat√©ria</th>
                                <th>Hospital</th>
                                <th>Per√≠odo</th>
                                <th>Turno</th>
                                <th>Detalhes</th>
                                <th>Prefer√™ncia</th> <!-- Nova coluna para prefer√™ncia -->
                                <th>A√ß√£o</th>
                            </tr>
                        </thead>
                        <tbody id="courseListBody">
                            <!-- O conte√∫do da tabela ser√° preenchido via JavaScript -->
                            <tr><td colspan="7" class="text-center text-gray-600 py-4">Selecione uma mat√©ria para ver as op√ß√µes de cursada.</td></tr>
                        </tbody>
                    </table>
                </div>

                <!-- Se√ß√£o de Cursadas Selecionadas -->
                <h3 class="text-2xl font-semibold text-indigo-700 mt-8 mb-4">Minhas Cursadas Selecionadas</h3>
                <div id="selectedCoursesCard" class="selected-courses-card">
                    <div class="overflow-x-auto">
                        <table id="selectedCoursesTable" class="course-table">
                            <thead>
                                <tr>
                                    <th>Mat√©ria</th>
                                    <th>Hospital</th>
                                <th>Per√≠odo</th>
                                    <th>Turno</th>
                                    <th>Prefer√™ncia</th> <!-- Prefer√™ncia tamb√©m na tabela de selecionadas -->
                                    <th>Conflitos</th>
                                    <th>A√ß√£o</th>
                                </tr>
                            </thead>
                            <tbody id="selectedCoursesBody">
                                <!-- O conte√∫do da tabela de selecionadas ser√° preenchido via JavaScript -->
                                <tr><td colspan="7" class="text-center text-gray-600 py-4">Nenhuma cursada selecionada ainda.</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>
        </main>

        <!-- Rodap√© do site -->
        <footer class="card text-center mt-8 bg-indigo-700 text-white">
            <p class="text-sm opacity-90">Desenhado por Luiz Soares Jr. | Seu Parceiro de Estudos UBA üéì</p>
        </footer>
    </div>

    <script>
        // --- Dados Consolidados das Cursadas ---
        // Esta array cont√©m todas as op√ß√µes de cursadas dispon√≠veis,
        // incluindo mat√©rias, hospitais, datas de in√≠cio/fim e turno.
        // Os nomes das mat√©rias foram padronizados para evitar duplicatas e varia√ß√µes.
        // Turnos: 'Manh√£' √© o padr√£o se n√£o especificado, 'Tarde' para vespertinas.
        // As cursadas antes de 01/08/2025 foram removidas.
        const allCoursesData = [
            { subject: 'Pediatria', hospital: 'Posadas', start: '04/08/2025', end: '10/10/2025', turno: 'Manh√£', details: 'A conseguir inclus√£o.' },
            { subject: 'Cirurgia Geral', hospital: 'Mor√≥n', start: '04/08/2025', end: '10/10/2025', turno: 'Vespertina', details: 'A conseguir inclus√£o.' },
            { subject: 'Urologia', hospital: 'Carril A Espa√±ol', start: '20/10/2025', end: '31/10/2025', turno: 'Manh√£', details: 'Parte do Carril A.' },
            { subject: 'Oftalmologia', hospital: 'Carril A Espa√±ol', start: '03/11/2025', end: '14/11/2025', turno: 'Manh√£', details: 'Parte do Carril A.' },
            { subject: 'Neumonologia', hospital: 'Santa B√°rbara', start: '03/11/2025', end: '14/11/2025', turno: 'Vespertina', details: '' },
            { subject: 'Ginecologia', hospital: 'Torn√∫ ou O√±ativia', start: '17/11/2025', end: '19/12/2025', turno: 'Manh√£', details: 'A conseguir inclus√£o.' },
            { subject: 'Obstetr√≠cia', hospital: 'Ramos Mej√≠a', start: '17/11/2025', end: '19/12/2025', turno: 'Tarde', details: '' },
            { subject: 'Medicina B', hospital: 'Hospital Alem√£o', start: '11/08/2025', end: '19/12/2025', turno: 'Manh√£', details: '' },
            { subject: 'Ginecologia', hospital: 'Hospital Alem√£o', start: '11/08/2025', end: '12/09/2025', turno: 'Manh√£', details: '' },
            { subject: 'Otorrinolaringologia', hospital: 'Hospital Alem√£o', start: '03/11/2025', end: '14/11/2025', turno: 'Manh√£', details: '' },
            { subject: 'Urologia', hospital: 'Hospital Alem√£o', start: '17/11/2025', end: '28/11/2025', turno: 'Manh√£', details: '' },
            { subject: 'Medicina B', hospital: 'Hospital Argerich', start: '11/08/2025', end: '19/12/2025', turno: 'Manh√£', details: '' },
            { subject: 'Oftalmologia', hospital: 'Hospital Argerich', start: '01/09/2025', end: '12/09/2025', turno: 'Manh√£', details: '' },
            { subject: 'Urologia', hospital: 'Hospital Argerich', start: '15/09/2025', end: '26/09/2025', turno: 'Manh√£', details: '' },
            { subject: 'Otorrinolaringologia', hospital: 'Hospital Argerich', start: '29/09/2025', end: '10/10/2025', turno: 'Manh√£', details: '' },
            { subject: 'Cirurgia Geral', hospital: 'Hospital Argerich', start: '13/10/2025', end: '19/12/2025', turno: 'Manh√£', details: '' },
            { subject: 'Neurocirurgia', hospital: 'Hospital Bocalandro', start: '18/08/2025', end: '29/08/2025', turno: 'Manh√£', details: 'Carril Superior' },
            { subject: 'Oftalmologia', hospital: 'Hospital Bocalandro', start: '01/09/2025', end: '12/09/2025', turno: 'Manh√£', details: 'Carril Superior' },
            { subject: 'Ginecologia', hospital: 'Hospital Bocalandro', start: '15/09/2025', end: '17/10/2025', turno: 'Manh√£', details: 'Carril Superior' },
            { subject: 'Urologia', hospital: 'Hospital Bocalandro', start: '20/10/2025', end: '31/10/2025', turno: 'Manh√£', details: 'Carril Superior' },
            { subject: 'Otorrinolaringologia', hospital: 'Hospital Bocalandro', start: '03/11/2025', end: '14/11/2025', turno: 'Manh√£', details: 'Carril Superior' },
            { subject: 'Obstetr√≠cia', hospital: 'Hospital Bocalandro', start: '17/11/2025', end: '19/12/2025', turno: 'Manh√£', details: 'Carril Superior' },
            { subject: 'Ginecologia', hospital: 'Hospital Bocalandro', start: '11/08/2025', end: '12/09/2025', turno: 'Manh√£', details: 'Carril do Meio' },
            { subject: 'Obstetr√≠cia', hospital: 'Hospital Bocalandro', start: '15/09/2025', end: '17/10/2025', turno: 'Manh√£', details: 'Carril do Meio' },
            { subject: 'Neurocirurgia', hospital: 'Hospital Bocalandro', start: '20/10/2025', end: '31/10/2025', turno: 'Manh√£', details: 'Carril do Meio' },
            { subject: 'Otorrinolaringologia', hospital: 'Hospital Bocalandro', start: '03/11/2025', end: '14/11/2025', turno: 'Manh√£', details: 'Carril do Meio' },
            { subject: 'Urologia', hospital: 'Hospital Bocalandro', start: '17/11/2025', end: '28/11/2025', turno: 'Manh√£', details: 'Carril do Meio' },
            { subject: 'Oftalmologia', hospital: 'Hospital Bocalandro', start: '01/12/2025', end: '19/12/2025', turno: 'Manh√£', details: 'Carril do Meio' },
            { subject: 'Cirurgia Geral', hospital: 'Hospital Bocalandro', start: '04/08/2025', end: '10/10/2025', turno: 'Manh√£', details: 'Carril Inferior' },
            { subject: 'Pediatria', hospital: 'Hospital Bocalandro', start: '13/10/2025', end: '19/12/2025', turno: 'Manh√£', details: 'Carril Inferior' },
            { subject: 'Neumonologia', hospital: 'Hospital Bocalandro', start: '08/09/2025', end: '22/09/2025', turno: 'Manh√£', details: 'Cl√≠nicas' },
            { subject: 'Infectologia', hospital: 'Hospital Bocalandro', start: '13/10/2025', end: '27/10/2025', turno: 'Manh√£', details: 'Cl√≠nicas' },
            { subject: 'Neurocirurgia', hospital: 'Hospital Brit√¢nico', start: '18/08/2025', end: '29/08/2025', turno: 'Manh√£', details: '' },
            { subject: 'Oftalmologia', hospital: 'Hospital Brit√¢nico', start: '01/09/2025', end: '12/09/2025', turno: 'Manh√£', details: '' },
            { subject: 'Urologia', hospital: 'Hospital Brit√¢nico', start: '15/09/2025', end: '26/09/2025', turno: 'Manh√£', details: '' },
            { subject: 'Otorrinolaringologia', hospital: 'Hospital Brit√¢nico', start: '29/09/2025', end: '10/10/2025', turno: 'Manh√£', details: '' },
            { subject: 'Cirurgia Geral', hospital: 'Hospital Brit√¢nico', start: '13/10/2025', end: '19/12/2025', turno: 'Manh√£', details: '' },
            { subject: 'Cirurgia Geral', hospital: 'Hospital Campos de Mayo', start: '04/08/2025', end: '10/10/2025', turno: 'Manh√£', details: '' },
            { subject: 'Pediatria', hospital: 'Hospital Campos de Mayo', start: '13/10/2025', end: '19/12/2025', turno: 'Manh√£', details: '' },
            { subject: 'Medicina B', hospital: 'Hospital Churruca', start: '11/08/2025', end: '19/12/2025', turno: 'Manh√£', details: '' },
            { subject: 'Ginecologia', hospital: 'Hospital Churruca', start: '11/08/2025', end: '12/09/2025', turno: 'Manh√£', details: '' },
            { subject: 'Obstetr√≠cia', hospital: 'Hospital Churruca', start: '15/09/2025', end: '17/10/2025', turno: 'Manh√£', details: '' },
            { subject: 'Neurocirurgia', hospital: 'Hospital Churruca', start: '20/10/2025', end: '31/10/2025', turno: 'Manh√£', details: '' },
            { subject: 'Otorrinolaringologia', hospital: 'Hospital Churruca', start: '03/11/2025', end: '14/11/2025', turno: 'Manh√£', details: '' },
            { subject: 'Urologia', hospital: 'Hospital Churruca', start: '17/11/2025', end: '28/11/2025', turno: 'Manh√£', details: '' },
            { subject: 'Oftalmologia', hospital: 'Hospital Churruca', start: '01/12/2025', end: '19/12/2025', turno: 'Manh√£', details: '' },
            { subject: 'Infectologia', hospital: 'Hospital de Cl√≠nicas', start: '13/10/2025', end: '27/10/2025', turno: 'Manh√£', details: '5¬∫ Ano Cl√≠nicas - Carril 7' },
            { subject: 'Psiquiatria', hospital: 'Hospital de Cl√≠nicas', start: '08/09/2025', end: '22/09/2025', turno: 'Manh√£', details: '5¬∫ Ano Cl√≠nicas - Carril 7' },
            { subject: 'Neumonologia', hospital: 'Hospital de Cl√≠nicas', start: '08/09/2025', end: '22/09/2025', turno: 'Manh√£', details: '5¬∫ Ano Cl√≠nicas - Carril 6' },
            { subject: 'Neurologia', hospital: 'Hospital de Cl√≠nicas', start: '22/09/2025', end: '10/10/2025', turno: 'Manh√£', details: '5¬∫ Ano Cl√≠nicas - Carril 8' },
            { subject: 'Dermatologia', hospital: 'Hospital de Cl√≠nicas', start: '27/10/2025', end: '10/11/2025', turno: 'Manh√£', details: '5¬∫ Ano Cl√≠nicas - Carril 8' },
            { subject: 'Radiologia', hospital: 'Hospital de Cl√≠nicas', start: '13/10/2025', end: '27/10/2025', turno: 'Manh√£', details: '5¬∫ Ano Cl√≠nicas - Carril 8' },
            { subject: 'Nutri√ß√£o', hospital: 'Hospital de Cl√≠nicas', start: '10/11/2025', end: '24/11/2025', turno: 'Manh√£', details: '5¬∫ Ano Cl√≠nicas - Carril 9' },
            { subject: 'Medicina B', hospital: 'Hospital de Cl√≠nicas', start: '11/08/2025', end: '19/12/2025', turno: 'Manh√£', details: '5¬∫ Ano Cl√≠nicas - C√°tedra I, Carril 1' },
            { subject: 'Cirurgia Geral', hospital: 'Hospital de Cl√≠nicas', start: '04/08/2025', end: '10/10/2025', turno: 'Manh√£', details: '6¬∫ Ano Cir√∫rgicas - Carril 7' },
            { subject: 'Pediatria', hospital: 'Hospital de Cl√≠nicas', start: '04/08/2025', end: '10/10/2025', turno: 'Manh√£', details: '6¬∫ Ano Cir√∫rgicas - Carril 8' },
            { subject: 'Oftalmologia', hospital: 'Hospital de Cl√≠nicas', start: '01/09/2025', end: '12/09/2025', turno: 'Manh√£', details: '6¬∫ Ano Cir√∫rgicas - Carril 1' },
            { subject: 'Otorrinolaringologia', hospital: 'Hospital de Cl√≠nicas', start: '15/09/2025', end: '26/09/2025', turno: 'Manh√£', details: '6¬∫ Ano Cir√∫rgicas - Carril 1' },
            { subject: 'Ginecologia', hospital: 'Hospital de Cl√≠nicas', start: '29/09/2025', end: '10/10/2025', turno: 'Manh√£', details: '6¬∫ Ano Cir√∫rgicas - Carril 1' },
            { subject: 'Obstetr√≠cia', hospital: 'Hospital de Cl√≠nicas', start: '13/10/2025', end: '19/12/2025', turno: 'Manh√£', details: '6¬∫ Ano Cir√∫rgicas - Carril 1' },
            { subject: 'Neurocirurgia', hospital: 'Hospital de Cl√≠nicas', start: '17/11/2025', end: '28/11/2025', turno: 'Manh√£', details: '6¬∫ Ano Cir√∫rgicas - Carril 1' },
            { subject: 'Infectologia', hospital: 'Hospital Durand', start: '11/08/2025', end: '05/09/2025', turno: 'Manh√£', details: 'Cl√≠nicas' },
            { subject: 'Neumonologia', hospital: 'Hospital Durand', start: '27/10/2025', end: '10/11/2025', turno: 'Manh√£', details: 'Cl√≠nicas' },
            { subject: 'Otorrinolaringologia', hospital: 'Hospital Evita de Lan√∫s', start: '11/08/2025', end: '27/08/2025', turno: 'Manh√£', details: 'Alunos 2024' },
            { subject: 'Oftalmologia', hospital: 'Hospital Evita de Lan√∫s', start: '11/08/2025', end: '27/08/2025', turno: 'Manh√£', details: 'Alunos 2024' },
            { subject: 'Ginecologia', hospital: 'Hospital Evita de Lan√∫s', start: '15/09/2025', end: '29/09/2025', turno: 'Manh√£', details: 'Alunos 2024' },
            { subject: 'Neurocirurgia', hospital: 'Hospital Evita de Lan√∫s', start: '20/10/2025', end: '03/11/2025', turno: 'Manh√£', details: 'Alunos 2024' },
            { subject: 'Oftalmologia', hospital: 'Hospital Evita de Lan√∫s', start: '20/10/2025', end: '03/11/2025', turno: 'Manh√£', details: 'Alunos 2024' },
            { subject: 'Obstetr√≠cia', hospital: 'Hospital Evita de Lan√∫s', start: '04/11/2025', end: '17/11/2025', turno: 'Manh√£', details: 'Alunos 2024' },
            { subject: 'Pediatria', hospital: 'Hospital Evita de Lan√∫s', start: '10/10/2025', end: '19/12/2025', turno: 'Manh√£', details: 'Alunos 2024' },
            { subject: 'Psiquiatria', hospital: 'Hospital Fern√°ndez', start: '11/08/2025', end: '05/09/2025', turno: 'Manh√£', details: '2¬∫ Ano - Comisi√≥n A' },
            { subject: 'Neurologia', hospital: 'Hospital Fern√°ndez', start: '08/09/2025', end: '26/09/2025', turno: 'Manh√£', details: '2¬∫ Ano - Comisi√≥n A' },
            { subject: 'Diagn√≥stico por Im√°genes', hospital: 'Hospital Fern√°ndez', start: '29/09/2025', end: '10/10/2025', turno: 'Manh√£', details: '2¬∫ Ano - Comisi√≥n A' },
            { subject: 'Dermatologia', hospital: 'Hospital Fern√°ndez', start: '10/11/2025', end: '28/11/2025', turno: 'Manh√£', details: '2¬∫ Ano - Comisi√≥n A' },
            { subject: 'Nutri√ß√£o', hospital: 'Hospital Fern√°ndez', start: '01/12/2025', end: '12/12/2025', turno: 'Manh√£', details: '2¬∫ Ano - Comisi√≥n A' },
            { subject: 'Dermatologia', hospital: 'Hospital Fern√°ndez', start: '08/09/2025', end: '26/09/2025', turno: 'Manh√£', details: '2¬∫ Ano - Comisi√≥n B' },
            { subject: 'Nutri√ß√£o', hospital: 'Hospital Fern√°ndez', start: '29/09/2025', end: '10/10/2025', turno: 'Manh√£', details: '2¬∫ Ano - Comisi√≥n B' },
            { subject: 'Neurologia', hospital: 'Hospital Fern√°ndez', start: '10/11/2025', end: '21/11/2025', turno: 'Manh√£', details: '2¬∫ Ano - Comisi√≥n B' },
            { subject: 'Neumonologia', hospital: 'Hospital Fern√°ndez', start: '24/11/2025', end: '12/12/2025', turno: 'Manh√£', details: '2¬∫ Ano - Comisi√≥n B' },
            { subject: 'Infectologia', hospital: 'Hospital Fern√°ndez', start: '13/10/2025', end: '07/11/2025', turno: 'Manh√£', details: 'Comum a ambas comiss√µes' },
            { subject: 'Toxicologia', hospital: 'Hospital Fern√°ndez', start: '12/08/2025', end: '06/11/2025', turno: 'Vespertina', details: 'Comum a ambas comiss√µes' },
            { subject: 'Pediatria', hospital: 'Hospital Fern√°ndez', start: '04/08/2025', end: '10/10/2025', turno: 'Manh√£', details: '3¬∫ Ano - Comisi√≥n A' },
            { subject: 'Ginecologia', hospital: 'Hospital Fern√°ndez', start: '13/10/2025', end: '14/11/2025', turno: 'Manh√£', details: '3¬∫ Ano - Comisi√≥n A' },
            { subject: 'Obstetr√≠cia', hospital: 'Hospital Fern√°ndez', start: '17/11/2025', end: '19/12/2025', turno: 'Manh√£', details: '3¬∫ Ano - Comisi√≥n A' },
            { subject: 'Ginecologia', hospital: 'Hospital Fern√°ndez', start: '01/09/2025', end: '03/10/2025', turno: 'Manh√£', details: '3¬∫ Ano - Comisi√≥n B' },
            { subject: 'Obstetr√≠cia', hospital: 'Hospital Fern√°ndez', start: '08/10/2025', end: '07/11/2025', turno: 'Manh√£', details: '3¬∫ Ano - Comisi√≥n B' },
            { subject: 'Otorrinolaringologia', hospital: 'Hospital Fern√°ndez', start: '24/11/2025', end: '05/12/2025', turno: 'Manh√£', details: '3¬∫ Ano - Comisi√≥n B' },
            { subject: 'Urologia', hospital: 'Hospital Fern√°ndez', start: '08/12/2025', end: '19/12/2025', turno: 'Manh√£', details: '3¬∫ Ano - Comisi√≥n B' },
            { subject: 'Otorrinolaringologia', hospital: 'Hospital Fiorito', start: '11/08/2025', end: '22/08/2025', turno: 'Manh√£', details: 'Linha 1' },
            { subject: 'Traumatologia', hospital: 'Hospital Fiorito', start: '25/08/2025', end: '12/09/2025', turno: 'Manh√£', details: 'Linha 1' },
            { subject: 'Ginecologia', hospital: 'Hospital Fiorito', start: '15/09/2025', end: '17/10/2025', turno: 'Manh√£', details: 'Linha 1' },
            { subject: 'Urologia', hospital: 'Hospital Fiorito', start: '20/10/2025', end: '31/10/2025', turno: 'Manh√£', details: 'Linha 1' },
            { subject: 'Neurocirurgia', hospital: 'Hospital Fiorito', start: '03/11/2025', end: '14/11/2025', turno: 'Manh√£', details: 'Linha 1' },
            { subject: 'Obstetr√≠cia', hospital: 'Hospital Fiorito', start: '17/11/2025', end: '19/12/2025', turno: 'Manh√£', details: 'Linha 1' },
            { subject: 'Ginecologia', hospital: 'Hospital Fiorito', start: '11/08/2025', end: '22/08/2025', turno: 'Manh√£', details: 'Linha 2' },
            { subject: 'Obstetr√≠cia', hospital: 'Hospital Fiorito', start: '25/08/2025', end: '12/09/2025', turno: 'Manh√£', details: 'Linha 2' },
            { subject: 'Neurocirurgia', hospital: 'Hospital Fiorito', start: '15/09/2025', end: '10/10/2025', turno: 'Manh√£', details: 'Linha 2' },
            { subject: 'Otorrinolaringologia', hospital: 'Hospital Fiorito', start: '13/10/2025', end: '24/10/2025', turno: 'Manh√£', details: 'Linha 2' },
            { subject: 'Oftalmologia', hospital: 'Hospital Fiorito', start: '27/10/2025', end: '14/11/2025', turno: 'Manh√£', details: 'Linha 2' },
            { subject: 'Traumatologia', hospital: 'Hospital Fiorito', start: '17/11/2025', end: '19/12/2025', turno: 'Manh√£', details: 'Linha 2' },
            { subject: 'Cirurgia Geral', hospital: 'Hospital Fiorito', start: '13/10/2025', end: '19/12/2025', turno: 'Manh√£', details: 'Linha 3' },
            { subject: 'Neumonologia', hospital: 'Hospital Fiorito', start: '24/11/2025', end: '19/12/2025', turno: 'Manh√£', details: 'Linha 4' },
            { subject: 'Psiquiatria', hospital: 'Hospital Italiano', start: '11/08/2025', end: '05/09/2025', turno: 'Manh√£', details: '' },
            { subject: 'Infectologia', hospital: 'Hospital Italiano', start: '08/09/2025', end: '03/10/2025', turno: 'Manh√£', details: '' },
            { subject: 'Neumonologia', hospital: 'Hospital Italiano', start: '06/10/2025', end: '17/10/2025', turno: 'Manh√£', details: '' },
            { subject: 'Dermatologia', hospital: 'Hospital Italiano', start: '20/10/2025', end: '07/11/2025', turno: 'Manh√£', details: '' },
            { subject: 'Radiologia', hospital: 'Hospital Italiano', start: '10/11/2025', end: '21/11/2025', turno: 'Manh√£', details: '' },
            { subject: 'Neurologia', hospital: 'Hospital Italiano', start: '24/11/2025', end: '12/12/2025', turno: 'Manh√£', details: '' },
            { subject: 'Pediatria', hospital: 'Hospital Italiano', start: '04/08/2025', end: '10/10/2025', turno: 'Manh√£', details: '' },
            { subject: 'Cirurgia Geral', hospital: 'Hospital Italiano', start: '13/10/2025', end: '19/12/2025', turno: 'Manh√£', details: '' },
            { subject: 'Dermatologia', hospital: 'Hospital Lanari', start: '18/08/2025', end: '05/09/2025', turno: 'Manh√£', details: '' },
            { subject: 'Neumonologia', hospital: 'Hospital Lanari', start: '08/09/2025', end: '19/09/2025', turno: 'Manh√£', details: '' },
            { subject: 'Radiologia', hospital: 'Hospital Lanari', start: '22/09/2025', end: '03/10/2025', turno: 'Manh√£', details: '' },
            { subject: 'Infectologia', hospital: 'Hospital Lanari', start: '13/10/2025', end: '27/10/2025', turno: 'Manh√£', details: '' },
            { subject: 'Psiquiatria', hospital: 'Hospital Lanari', start: '27/10/2025', end: '10/11/2025', turno: 'Manh√£', details: '' },
            { subject: 'Nutri√ß√£o', hospital: 'Hospital Lanari', start: '10/11/2025', end: '24/11/2025', turno: 'Manh√£', details: '' },
            { subject: 'Neurocirurgia', hospital: 'Hospital Larcade', start: '18/08/2025', end: '29/08/2025', turno: 'Manh√£', details: '6¬∫ Ano Grupo A' },
            { subject: 'Oftalmologia', hospital: 'Hospital Larcade', start: '01/09/2025', end: '12/09/2025', turno: 'Manh√£', details: '6¬∫ Ano Grupo A' },
            { subject: 'Ginecologia', hospital: 'Hospital Larcade', start: '15/09/2025', end: '17/10/2025', turno: 'Manh√£', details: '6¬∫ Ano Grupo A' },
            { subject: 'Urologia', hospital: 'Hospital Larcade', start: '20/10/2025', end: '31/10/2025', turno: 'Manh√£', details: '6¬∫ Ano Grupo A' },
            { subject: 'Otorrinolaringologia', hospital: 'Hospital Larcade', start: '03/11/2025', end: '14/11/2025', turno: 'Manh√£', details: '6¬∫ Ano Grupo A' },
            { subject: 'Obstetr√≠cia', hospital: 'Hospital Larcade', start: '17/11/2025', end: '19/12/2025', turno: 'Manh√£', details: '6¬∫ Ano Grupo A' },
            { subject: 'Pediatria', hospital: 'Hospital Larcade', start: '04/08/2025', end: '10/10/2025', turno: 'Manh√£', details: '6¬∫ Ano Grupo B' },
            { subject: 'Cirurgia Geral', hospital: 'Hospital Larcade', start: '13/10/2025', end: '19/12/2025', turno: 'Manh√£', details: '6¬∫ Ano Grupo B' },
            { subject: 'Dermatologia', hospital: 'Hospital Larcade', start: '18/08/2025', end: '05/09/2025', turno: 'Manh√£', details: '5¬∫ Ano Grupo A' },
            { subject: 'Neumonologia', hospital: 'Hospital Larcade', start: '08/09/2025', end: '19/09/2025', turno: 'Manh√£', details: '5¬∫ Ano Grupo A' },
            { subject: 'Radiologia', hospital: 'Hospital Larcade', start: '22/09/2025', end: '03/10/2025', turno: 'Manh√£', details: '5¬∫ Ano Grupo A' },
            { subject: 'Infectologia', hospital: 'Hospital Larcade', start: '13/10/2025', end: '07/11/2025', turno: 'Manh√£', details: '5¬∫ Ano Grupo A' },
            { subject: 'Psiquiatria', hospital: 'Hospital Larcade', start: '10/11/2025', end: '21/11/2025', turno: 'Manh√£', details: '5¬∫ Ano Grupo A' },
            { subject: 'Nutri√ß√£o', hospital: 'Hospital Larcade', start: '08/12/2025', end: '19/12/2025', turno: 'Manh√£', details: '5¬∫ Ano Grupo A' },
            { subject: 'Neurologia', hospital: 'Hospital Larcade', start: '18/08/2025', end: '05/09/2025', turno: 'Manh√£', details: '5¬∫ Ano Grupo B' },
            { subject: 'Psiquiatria', hospital: 'Hospital Larcade', start: '08/09/2025', end: '03/10/2025', turno: 'Manh√£', details: '5¬∫ Ano Grupo B' },
            { subject: 'Radiologia', hospital: 'Hospital Larcade', start: '13/10/2025', end: '24/10/2025', turno: 'Manh√£', details: '5¬∫ Ano Grupo B' },
            { subject: 'Nutri√ß√£o', hospital: 'Hospital Larcade', start: '27/10/2025', end: '07/11/2025', turno: 'Manh√£', details: '5¬∫ Ano Grupo B' },
            { subject: 'Infectologia', hospital: 'Hospital Larcade', start: '10/11/2025', end: '05/12/2025', turno: 'Manh√£', details: '5¬∫ Ano Grupo B' },
            { subject: 'Neumonologia', hospital: 'Hospital Larcade', start: '08/12/2025', end: '19/12/2025', turno: 'Manh√£', details: '5¬∫ Ano Grupo B' },
            { subject: 'Psiquiatria', hospital: 'Hospital Malvinas', start: '11/08/2025', end: '05/09/2025', turno: 'Manh√£', details: '' },
            { subject: 'Urologia', hospital: 'Hospital Malvinas', start: '08/09/2025', end: '26/09/2025', turno: 'Manh√£', details: '' },
            { subject: 'Otorrinolaringologia', hospital: 'Hospital Malvinas', start: '29/09/2025', end: '10/10/2025', turno: 'Manh√£', details: '' },
            { subject: 'Diagn√≥stico por Im√°genes', hospital: 'Hospital Malvinas', start: '13/10/2025', end: '24/10/2025', turno: 'Manh√£', details: '' },
            { subject: 'Nutri√ß√£o', hospital: 'Hospital Malvinas', start: '27/10/2025', end: '07/11/2025', turno: 'Manh√£', details: '(Ubicar)' },
            { subject: 'Obstetr√≠cia', hospital: 'Hospital Malvinas', start: '17/11/2025', end: '12/12/2025', turno: 'Manh√£', details: '' },
            { subject: 'Otorrinolaringologia', hospital: 'Hospital Milstein', start: '11/08/2025', end: '22/08/2025', turno: 'Manh√£', details: '' },
            { subject: 'Traumatologia', hospital: 'Hospital Milstein', start: '25/08/2025', end: '12/09/2025', turno: 'Manh√£', details: '' },
            { subject: 'Urologia', hospital: 'Hospital Milstein', start: '15/09/2025', end: '26/09/2025', turno: 'Manh√£', details: '' },
            { subject: 'Dermatologia', hospital: 'Hospital Milstein', start: '29/09/2025', end: '17/10/2025', turno: 'Manh√£', details: '' },
            { subject: 'Neurologia', hospital: 'Hospital Milstein', start: '20/10/2025', end: '07/11/2025', turno: 'Manh√£', details: '' },
            { subject: 'Neurocirurgia', hospital: 'Hospital Milstein', start: '10/11/2025', end: '21/11/2025', turno: 'Manh√£', details: '' },
            { subject: 'Infectologia', hospital: 'Hospital Milstein', start: '24/11/2025', end: '19/12/2025', turno: 'Manh√£', details: '' },
            { subject: 'Neurocirurgia', hospital: 'Hospital Moreno', start: '18/08/2025', end: '29/08/2025', turno: 'Manh√£', details: 'Cir√∫rgicas - Linha Superior' },
            { subject: 'Ginecologia', hospital: 'Hospital Moreno', start: '01/09/2025', end: '12/09/2025', turno: 'Manh√£', details: 'Cir√∫rgicas - Linha Superior' },
            { subject: 'Obstetr√≠cia', hospital: 'Hospital Moreno', start: '15/09/2025', end: '26/09/2025', turno: 'Manh√£', details: 'Cir√∫rgicas - Linha Superior' },
            { subject: 'Otorrinolaringologia', hospital: 'Hospital Moreno', start: '29/09/2025', end: '10/10/2025', turno: 'Manh√£', details: 'Cir√∫rgicas - Linha Superior' },
            { subject: 'Urologia', hospital: 'Hospital Moreno', start: '13/10/2025', end: '24/10/2025', turno: 'Manh√£', details: 'Cir√∫rgicas - Linha Superior' },
            { subject: 'Neurocirurgia', hospital: 'Hospital Moreno', start: '27/10/2025', end: '07/11/2025', turno: 'Manh√£', details: 'Cir√∫rgicas - Linha Superior' },
            { subject: 'Oftalmologia', hospital: 'Hospital Moreno', start: '10/11/2025', end: '21/11/2025', turno: 'Manh√£', details: 'Cir√∫rgicas - Linha Superior' },
            { subject: 'Obstetr√≠cia', hospital: 'Hospital Moreno', start: '24/11/2025', end: '19/12/2025', turno: 'Manh√£', details: 'Cir√∫rgicas - Linha Superior' },
            { subject: 'Otorrinolaringologia', hospital: 'Hospital Moreno', start: '18/08/2025', end: '29/08/2025', turno: 'Manh√£', details: 'Cir√∫rgicas - Linha do Meio' },
            { subject: 'Neurocirurgia', hospital: 'Hospital Moreno', start: '01/09/2025', end: '12/09/2025', turno: 'Manh√£', details: 'Cir√∫rgicas - Linha do Meio' },
            { subject: 'Oftalmologia', hospital: 'Hospital Moreno', start: '15/09/2025', end: '26/09/2025', turno: 'Manh√£', details: 'Cir√∫rgicas - Linha do Meio' },
            { subject: 'Urologia', hospital: 'Hospital Moreno', start: '29/09/2025', end: '10/10/2025', turno: 'Manh√£', details: 'Cir√∫rgicas - Linha do Meio' },
            { subject: 'Obstetr√≠cia', hospital: 'Hospital Moreno', start: '13/10/2025', end: '24/10/2025', turno: 'Manh√£', details: 'Cir√∫rgicas - Linha do Meio' },
            { subject: 'Otorrinolaringologia', hospital: 'Hospital Moreno', start: '27/10/2025', end: '07/11/2025', turno: 'Manh√£', details: 'Cir√∫rgicas - Linha do Meio' },
            { subject: 'Neurocirurgia', hospital: 'Hospital Moreno', start: '10/11/2025', end: '21/11/2025', turno: 'Manh√£', details: 'Cir√∫rgicas - Linha do Meio' },
            { subject: 'Oftalmologia', hospital: 'Hospital Moreno', start: '24/11/2025', end: '19/12/2025', turno: 'Manh√£', details: 'Cir√∫rgicas - Linha do Meio' },
            { subject: 'Ginecologia', hospital: 'Hospital Muniz', start: '08/08/2025', end: '29/08/2025', turno: 'Manh√£', details: 'Cir√∫rgicas' },
            { subject: 'Infectologia', hospital: 'Hospital Naval', start: '11/08/2025', end: '05/09/2025', turno: 'Manh√£', details: '' },
            { subject: 'Nutri√ß√£o', hospital: 'Hospital Naval', start: '08/09/2025', end: '19/09/2025', turno: 'Manh√£', details: '' },
            { subject: 'Neurologia', hospital: 'Hospital Naval', start: '22/09/2025', end: '10/10/2025', turno: 'Manh√£', details: '' },
            { subject: 'Psiquiatria', hospital: 'Hospital Naval', start: '13/10/2025', end: '07/11/2025', turno: 'Manh√£', details: '' },
            { subject: 'Neumonologia', hospital: 'Hospital Naval', start: '10/11/2025', end: '21/11/2025', turno: 'Manh√£', details: '' },
            { subject: 'Dermatologia', hospital: 'Hospital Naval', start: '24/11/2025', end: '12/12/2025', turno: 'Manh√£', details: '' },
            { subject: 'Pediatria', hospital: 'Hospital Naval', start: '04/08/2025', end: '10/10/2025', turno: 'Manh√£', details: '' },
            { subject: 'Cirurgia Geral', hospital: 'Hospital Naval', start: '13/10/2025', end: '19/12/2025', turno: 'Manh√£', details: '' },
            { subject: 'Obstetr√≠cia', hospital: 'Hospital O√±ativia', start: '11/08/2025', end: '12/09/2025', turno: 'Manh√£', details: 'Linha do Meio' },
            { subject: 'Neurocirurgia', hospital: 'Hospital O√±ativia', start: '15/09/2025', end: '26/09/2025', turno: 'Manh√£', details: 'Linha do Meio' },
            { subject: 'Otorrinolaringologia', hospital: 'Hospital O√±ativia', start: '29/09/2025', end: '10/10/2025', turno: 'Manh√£', details: 'Linha do Meio' },
            { subject: 'Radiologia', hospital: 'Hospital O√±ativia', start: '13/10/2025', end: '24/10/2025', turno: 'Manh√£', details: 'Linha do Meio' },
            { subject: 'Oftalmologia', hospital: 'Hospital O√±ativia', start: '27/10/2025', end: '14/11/2025', turno: 'Manh√£', details: 'Linha do Meio' },
            { subject: 'Ginecologia', hospital: 'Hospital O√±ativia', start: '17/11/2025', end: '19/12/2025', turno: 'Manh√£', details: 'Linha do Meio' },
            { subject: 'Medicina B', hospital: 'Hospital Paroissien', start: '11/08/2025', end: '19/12/2025', turno: 'Manh√£', details: '' },
            { subject: 'Dermatologia', hospital: 'Hospital Penna', start: '18/08/2025', end: '05/09/2025', turno: 'Manh√£', details: 'Cl√≠nicas' },
            { subject: 'Neumonologia', hospital: 'Hospital Penna', start: '08/09/2025', end: '19/09/2025', turno: 'Manh√£', details: 'Cl√≠nicas' },
            { subject: 'Radiologia', hospital: 'Hospital Penna', start: '22/09/2025', end: '03/10/2025', turno: 'Manh√£', details: 'Cl√≠nicas' },
            { subject: 'Infectologia', hospital: 'Hospital Penna', start: '13/10/2025', end: '27/10/2025', turno: 'Manh√£', details: 'Cl√≠nicas' },
            { subject: 'Psiquiatria', hospital: 'Hospital Penna', start: '27/10/2025', end: '10/11/2025', turno: 'Manh√£', details: 'Cl√≠nicas' },
            { subject: 'Nutri√ß√£o', hospital: 'Hospital Penna', start: '10/11/2025', end: '24/11/2025', turno: 'Manh√£', details: 'Cl√≠nicas' },
            { subject: 'Obstetr√≠cia', hospital: 'Hospital Penna', start: '15/09/2025', end: '26/09/2025', turno: 'Manh√£', details: 'Cir√∫rgicas' },
            { subject: 'Neurocirurgia', hospital: 'Hospital Penna', start: '20/10/2025', end: '31/10/2025', turno: 'Manh√£', details: 'Cir√∫rgicas' },
            { subject: 'Otorrinolaringologia', hospital: 'Hospital Penna', start: '03/11/2025', end: '14/11/2025', turno: 'Manh√£', details: 'Cir√∫rgicas' },
            { subject: 'Urologia', hospital: 'Hospital Penna', start: '17/11/2025', end: '28/11/2025', turno: 'Manh√£', details: 'Cir√∫rgicas' },
            { subject: 'Oftalmologia', hospital: 'Hospital Penna', start: '01/12/2025', end: '19/12/2025', turno: 'Manh√£', details: 'Cir√∫rgicas' },
            { subject: 'Medicina B', hospital: 'Hospital Pi√±ero', start: '11/08/2025', end: '19/12/2025', turno: 'Manh√£', details: 'Linha do Meio' },
            { subject: 'Neurocirurgia', hospital: 'Hospital Posadas', start: '18/08/2025', end: '29/08/2025', turno: 'Manh√£', details: 'Grupo 1' },
            { subject: 'Oftalmologia', hospital: 'Hospital Posadas', start: '01/09/2025', end: '12/09/2025', turno: 'Manh√£', details: 'Grupo 1' },
            { subject: 'Ginecologia', hospital: 'Hospital Posadas', start: '15/09/2025', end: '17/10/2025', turno: 'Manh√£', details: 'Grupo 1' },
            { subject: 'Urologia', hospital: 'Hospital Posadas', start: '20/10/2025', end: '31/10/2025', turno: 'Manh√£', details: 'Grupo 1' },
            { subject: 'Otorrinolaringologia', hospital: 'Hospital Posadas', start: '03/11/2025', end: '14/11/2025', turno: 'Manh√£', details: 'Grupo 1' },
            { subject: 'Obstetr√≠cia', hospital: 'Hospital Posadas', start: '17/11/2025', end: '19/12/2025', turno: 'Manh√£', details: 'Grupo 1' },
            { subject: 'Pediatria', hospital: 'Hospital Posadas', start: '04/08/2025', end: '10/10/2025', turno: 'Manh√£', details: 'Grupo 2' },
            { subject: 'Cirurgia Geral', hospital: 'Hospital Posadas', start: '13/10/2025', end: '19/12/2025', turno: 'Manh√£', details: 'Grupo 2' },
            { subject: 'Cirurgia Geral', hospital: 'Hospital Posadas', start: '04/08/2025', end: '04/10/2025', turno: 'Manh√£', details: 'Grupo 3' },
            { subject: 'Pediatria', hospital: 'Hospital Posadas', start: '13/10/2025', end: '19/12/2025', turno: 'Manh√£', details: 'Grupo 3' },
            { subject: 'Pediatria', hospital: 'Hospital Ramos Mej√≠a', start: '04/08/2025', end: '10/10/2025', turno: 'Manh√£', details: '' },
            { subject: 'Ginecologia', hospital: 'Hospital Ramos Mej√≠a', start: '13/10/2025', end: '14/11/2025', turno: 'Manh√£', details: '' },
            { subject: 'Obstetr√≠cia', hospital: 'Hospital Ramos Mej√≠a', start: '17/11/2025', end: '19/12/2025', turno: 'Manh√£', details: '' },
            { subject: 'Cirurgia Geral', hospital: 'Hospital Ramos Mej√≠a', start: '04/08/2025', end: '10/10/2025', turno: 'Manh√£', details: '' },
            { subject: 'Pediatria', hospital: 'Hospital Ramos Mej√≠a', start: '13/10/2025', end: '19/12/2025', turno: 'Manh√£', details: '' },
            { subject: 'Medicina B', hospital: 'Hospital Rivadavia', start: '11/08/2025', end: '19/12/2025', turno: 'Manh√£', details: 'Cl√≠nicas - Almandoz' },
            { subject: 'Psiquiatria', hospital: 'Hospital Rivadavia', start: '11/08/2025', end: '05/09/2025', turno: 'Manh√£', details: 'Cl√≠nicas - Abaca' },
            { subject: 'Neumonologia', hospital: 'Hospital Rivadavia', start: '08/09/2025', end: '19/09/2025', turno: 'Manh√£', details: 'Cl√≠nicas - Abaca' },
            { subject: 'Dermatologia', hospital: 'Hospital Rivadavia', start: '22/09/2025', end: '10/10/2025', turno: 'Manh√£', details: 'Cl√≠nicas - Abaca' },
            { subject: 'Neurologia', hospital: 'Hospital Rivadavia', start: '20/10/2025', end: '07/11/2025', turno: 'Manh√£', details: 'Cl√≠nicas - Abaca' },
            { subject: 'Infectologia', hospital: 'Hospital Rivadavia', start: '10/11/2025', end: '05/12/2025', turno: 'Manh√£', details: 'Cl√≠nicas - Abaca' },
            { subject: 'Otorrinolaringologia', hospital: 'Hospital Roffo', start: '11/08/2025', end: '22/08/2025', turno: 'Manh√£', details: 'Linha Superior' },
            { subject: 'Neurocirurgia', hospital: 'Hospital Roffo', start: '15/09/2025', end: '26/09/2025', turno: 'Manh√£', details: 'Linha Superior' },
            { subject: 'Urologia', hospital: 'Hospital Roffo', start: '29/09/2025', end: '10/10/2025', turno: 'Manh√£', details: 'Linha Superior' },
            { subject: 'Pediatria', hospital: 'Hospital Roffo', start: '13/10/2025', end: '19/12/2025', turno: 'Manh√£', details: 'Linha Superior' },
            { subject: 'Ginecologia', hospital: 'Hospital Roffo', start: '11/08/2025', end: '12/09/2025', turno: 'Manh√£', details: 'Linha Inferior' },
            { subject: 'Infectologia', hospital: 'Hospital Roffo', start: '13/10/2025', end: '14/11/2025', turno: 'Manh√£', details: 'Linha Inferior' },
            { subject: 'Oftalmologia', hospital: 'Hospital Roffo', start: '27/10/2025', end: '14/11/2025', turno: 'Manh√£', details: 'Linha Inferior' },
            { subject: 'Otorrinolaringologia', hospital: 'Hospital Roffo', start: '03/11/2025', end: '14/11/2025', turno: 'Manh√£', details: 'Linha Inferior' },
            { subject: 'Obstetr√≠cia', hospital: 'Hospital Roffo', start: '17/11/2025', end: '19/12/2025', turno: 'Manh√£', details: 'Linha Inferior' },
            { subject: 'Neurocirurgia', hospital: 'Hospital San Isidro', start: '18/08/2025', end: '29/08/2025', turno: 'Manh√£', details: 'Linha Superior' },
            { subject: 'Ginecologia', hospital: 'Hospital San Isidro', start: '01/09/2025', end: '12/09/2025', turno: 'Manh√£', details: 'Linha Superior' },
            { subject: 'Otorrinolaringologia', hospital: 'Hospital San Isidro', start: '15/09/2025', end: '26/09/2025', turno: 'Manh√£', details: 'Linha Superior' },
            { subject: 'Obstetr√≠cia', hospital: 'Hospital San Isidro', start: '29/09/2025', end: '10/10/2025', turno: 'Manh√£', details: 'Linha Superior' },
            { subject: 'Urologia', hospital: 'Hospital San Isidro', start: '13/10/2025', end: '24/10/2025', turno: 'Manh√£', details: 'Linha Superior' },
            { subject: 'Oftalmologia', hospital: 'Hospital San Isidro', start: '27/10/2025', end: '07/11/2025', turno: 'Manh√£', details: 'Linha Superior' },
            { subject: 'Obstetr√≠cia', hospital: 'Hospital San Isidro', start: '10/11/2025', end: '19/12/2025', turno: 'Manh√£', details: 'Linha Superior' },
            { subject: 'Obstetr√≠cia', hospital: 'Hospital San Isidro', start: '11/08/2025', end: '22/08/2025', turno: 'Manh√£', details: 'Linha Inferior' },
            { subject: 'Neurocirurgia', hospital: 'Hospital San Isidro', start: '25/08/2025', end: '12/09/2025', turno: 'Manh√£', details: 'Linha Inferior' },
            { subject: 'Otorrinolaringologia', hospital: 'Hospital San Isidro', start: '15/09/2025', end: '26/09/2025', turno: 'Manh√£', details: 'Linha Inferior' },
            { subject: 'Oftalmologia', hospital: 'Hospital San Isidro', start: '29/09/2025', end: '10/10/2025', turno: 'Manh√£', details: 'Linha Inferior' },
            { subject: 'Urologia', hospital: 'Hospital San Isidro', start: '13/10/2025', end: '24/10/2025', turno: 'Manh√£', details: 'Linha Inferior' },
            { subject: 'Obstetr√≠cia', hospital: 'Hospital San Isidro', start: '27/10/2025', end: '14/11/2025', turno: 'Manh√£', details: 'Linha Inferior' },
            { subject: 'Neurocirurgia', hospital: 'Hospital San Isidro', start: '17/11/2025', end: '19/12/2025', turno: 'Manh√£', details: 'Linha Inferior' },
            { subject: 'Urologia', hospital: 'Hospital San Isidro', start: '24/11/2025', end: '19/12/2025', turno: 'Manh√£', details: 'Linha Inferior' },
            { subject: 'Oftalmologia', hospital: 'Hospital San Isidro', start: '24/11/2025', end: '19/12/2025', turno: 'Manh√£', details: 'Linha Inferior' },
            { subject: 'Psiquiatria', hospital: 'Hospital Sanatorio G√ºemes', start: '11/08/2025', end: '05/09/2025', turno: 'Manh√£', details: 'Ciclo Cl√≠nico' },
            { subject: 'Neumonologia', hospital: 'Hospital Sanatorio G√ºemes', start: '08/09/2025', end: '19/09/2025', turno: 'Manh√£', details: 'Ciclo Cl√≠nico' },
            { subject: 'Dermatologia', hospital: 'Hospital Sanatorio G√ºemes', start: '22/09/2025', end: '10/10/2025', turno: 'Manh√£', details: 'Ciclo Cl√≠nico' },
            { subject: 'Diagn√≥stico por Im√°genes', hospital: 'Hospital Sanatorio G√ºemes', start: '10/11/2025', end: '21/11/2025', turno: 'Manh√£', details: 'Ciclo Cl√≠nico' },
            { subject: 'Nutri√ß√£o', hospital: 'Hospital Sanatorio G√ºemes', start: '27/10/2025', end: '07/11/2025', turno: 'Manh√£', details: 'Ciclo Cl√≠nico' },
            { subject: 'Otorrinolaringologia', hospital: 'Hospital Sanatorio G√ºemes', start: '11/08/2025', end: '22/08/2025', turno: 'Manh√£', details: 'Especialidades Quir√∫rgicas' },
            { subject: 'Oftalmologia', hospital: 'Hospital Sanatorio G√ºemes', start: '01/09/2025', end: '12/09/2025', turno: 'Manh√£', details: 'Especialidades Quir√∫rgicas' },
            { subject: 'Obstetr√≠cia', hospital: 'Hospital Sanatorio G√ºemes', start: '15/09/2025', end: '17/10/2025', turno: 'Manh√£', details: 'Especialidades Quir√∫rgicas' },
            { subject: 'Neurocirurgia', hospital: 'Hospital Sanatorio G√ºemes', start: '20/10/2025', end: '31/10/2025', turno: 'Manh√£', details: 'Especialidades Quir√∫rgicas' },
            { subject: 'Ginecologia', hospital: 'Hospital Sanatorio G√ºemes', start: '17/11/2025', end: '19/12/2025', turno: 'Manh√£', details: 'Especialidades Quir√∫rgicas' },
            { subject: 'Cirurgia Geral', hospital: 'Hospital Santojanni', start: '04/08/2025', end: '10/10/2025', turno: 'Manh√£', details: 'Cl√≠nicas/Cir√∫rgicas' },
            { subject: 'Pediatria', hospital: 'Hospital Santojanni', start: '13/10/2025', end: '19/12/2025', turno: 'Manh√£', details: 'Cl√≠nicas/Cir√∫rgicas' },
            { subject: 'Neurocirurgia', hospital: 'Hospital Tigre', start: '11/08/2025', end: '22/08/2025', turno: 'Manh√£', details: 'Cir√∫rgicas' },
            { subject: 'Ginecologia', hospital: 'Hospital Tigre', start: '15/09/2025', end: '26/09/2025', turno: 'Manh√£', details: 'Cir√∫rgicas' },
            { subject: 'Urologia', hospital: 'Hospital Tigre', start: '29/09/2025', end: '10/10/2025', turno: 'Manh√£', details: 'Cir√∫rgicas' },
            { subject: 'Otorrinolaringologia', hospital: 'Hospital Tigre', start: '13/10/2025', end: '24/10/2025', turno: 'Manh√£', details: 'Cir√∫rgicas' },
            { subject: 'Obstetr√≠cia', hospital: 'Hospital Tigre', start: '27/10/2025', end: '14/11/2025', turno: 'Manh√£', details: 'Cir√∫rgicas' },
            { subject: 'Neurocirurgia', hospital: 'Hospital Tigre', start: '17/11/2025', end: '19/12/2025', turno: 'Manh√£', details: 'Cir√∫rgicas' },
            { subject: 'Obstetr√≠cia', hospital: 'Hospital Tigre', start: '11/08/2025', end: '22/08/2025', turno: 'Manh√£', details: 'Cir√∫rgicas - Linha Inferior' },
            { subject: 'Neurocirurgia', hospital: 'Hospital Tigre', start: '25/08/2025', end: '12/09/2025', turno: 'Manh√£', details: 'Cir√∫rgicas - Linha Inferior' },
            { subject: 'Urologia', hospital: 'Hospital Tigre', start: '15/09/2025', end: '26/09/2025', turno: 'Manh√£', details: 'Cir√∫rgicas - Linha Inferior' },
            { subject: 'Oftalmologia', hospital: 'Hospital Tigre', start: '29/09/2025', end: '10/10/2025', turno: 'Manh√£', details: 'Cir√∫rgicas - Linha Inferior' },
            { subject: 'Otorrinolaringologia', hospital: 'Hospital Tigre', start: '13/10/2025', end: '24/10/2025', turno: 'Manh√£', details: 'Cir√∫rgicas - Linha Inferior' },
            { subject: 'Obstetr√≠cia', hospital: 'Hospital Tigre', start: '27/10/2025', end: '14/11/2025', turno: 'Manh√£', details: 'Cir√∫rgicas - Linha Inferior' },
            { subject: 'Neurocirurgia', hospital: 'Hospital Tigre', start: '17/11/2025', end: '19/12/2025', turno: 'Manh√£', details: 'Cir√∫rgicas - Linha Inferior' },
            { subject: 'Obstetr√≠cia', hospital: 'Hospital Torn√∫', start: '11/08/2025', end: '12/09/2025', turno: 'Manh√£', details: '' },
            { subject: 'Ginecologia', hospital: 'Hospital Torn√∫', start: '11/08/2025', end: '12/09/2025', turno: 'Manh√£', details: '' },
            { subject: 'Urologia', hospital: 'Hospital Torn√∫', start: '15/09/2025', end: '26/09/2025', turno: 'Manh√£', details: '' },
            { subject: 'Obstetr√≠cia', hospital: 'Hospital Torn√∫', start: '15/09/2025', end: '17/10/2025', turno: 'Manh√£', details: '' },
            { subject: 'Otorrinolaringologia', hospital: 'Hospital Torn√∫', start: '29/09/2025', end: '10/10/2025', turno: 'Manh√£', details: '' },
            { subject: 'Neurocirurgia', hospital: 'Hospital Torn√∫', start: '20/10/2025', end: '31/10/2025', turno: 'Manh√£', details: '' },
            { subject: 'Oftalmologia', hospital: 'Hospital Torn√∫', start: '13/10/2025', end: '24/10/2025', turno: 'Manh√£', details: '' },
            { subject: 'Otorrinolaringologia', hospital: 'Hospital Torn√∫', start: '03/11/2025', end: '14/11/2025', turno: 'Manh√£', details: '' },
            { subject: 'Oftalmologia', hospital: 'Hospital Torn√∫', start: '27/10/2025', end: '14/11/2025', turno: 'Manh√£', details: '' },
            { subject: 'Urologia', hospital: 'Hospital Torn√∫', start: '17/11/2025', end: '28/11/2025', turno: 'Manh√£', details: '' },
            { subject: 'Ginecologia', hospital: 'Hospital Torn√∫', start: '17/11/2025', end: '19/12/2025', turno: 'Manh√£', details: '' },
            { subject: 'Oftalmologia', hospital: 'Hospital Torn√∫', start: '01/12/2025', end: '19/12/2025', turno: 'Manh√£', details: '' },
            { subject: 'Neurocirurgia', hospital: 'Hospital V√©lez Sarsfield', start: '18/08/2025', end: '29/08/2025', turno: 'Manh√£', details: '' },
            { subject: 'Ginecologia', hospital: 'Hospital V√©lez Sarsfield', start: '01/09/2025', end: '12/09/2025', turno: 'Manh√£', details: '' },
            { subject: 'Urologia', hospital: 'Hospital V√©lez Sarsfield', start: '15/09/2025', end: '26/09/2025', turno: 'Manh√£', details: '' },
            { subject: 'Otorrinolaringologia', hospital: 'Hospital V√©lez Sarsfield', start: '29/09/2025', end: '10/10/2025', turno: 'Manh√£', details: '' },
            { subject: 'Obstetr√≠cia', hospital: 'Hospital V√©lez Sarsfield', start: '13/10/2025', end: '24/10/2025', turno: 'Manh√£', details: '' },
            { subject: 'Oftalmologia', hospital: 'Hospital V√©lez Sarsfield', start: '27/10/2025', end: '14/11/2025', turno: 'Manh√£', details: '' },
            { subject: 'Obstetr√≠cia', hospital: 'Hospital V√©lez Sarsfield', start: '17/11/2025', end: '19/12/2025', turno: 'Manh√£', details: '' },
            { subject: 'Obstetr√≠cia', hospital: 'Hospital V√©lez Sarsfield', start: '11/08/2025', end: '22/08/2025', turno: 'Manh√£', details: 'Linha Inferior' },
            { subject: 'Neurocirurgia', hospital: 'Hospital V√©lez Sarsfield', start: '25/08/2025', end: '12/09/2025', turno: 'Manh√£', details: 'Linha Inferior' },
            { subject: 'Otorrinolaringologia', hospital: 'Hospital V√©lez Sarsfield', start: '15/09/2025', end: '26/09/2025', turno: 'Manh√£', details: 'Linha Inferior' },
            { subject: 'Oftalmologia', hospital: 'Hospital V√©lez Sarsfield', start: '29/09/2025', end: '10/10/2025', turno: 'Manh√£', details: 'Linha Inferior' },
            { subject: 'Urologia', hospital: 'Hospital V√©lez Sarsfield', start: '13/10/2025', end: '24/10/2025', turno: 'Manh√£', details: 'Linha Inferior' },
            { subject: 'Obstetr√≠cia', hospital: 'Hospital V√©lez Sarsfield', start: '27/10/2025', end: '14/11/2025', turno: 'Manh√£', details: 'Linha Inferior' },
            { subject: 'Neurocirurgia', hospital: 'Hospital V√©lez Sarsfield', start: '17/11/2025', end: '19/12/2025', turno: 'Manh√£', details: 'Linha Inferior' },
            { subject: 'Urologia', hospital: 'Hospital V√©lez Sarsfield', start: '24/11/2025', end: '19/12/2025', turno: 'Manh√£', details: 'Linha Inferior' },
            { subject: 'Oftalmologia', hospital: 'Hospital V√©lez Sarsfield', start: '24/11/2025', end: '19/12/2025', turno: 'Manh√£', details: 'Linha Inferior' },
            { subject: 'Ginecologia', hospital: 'Hospital Zubizarreta', start: '11/08/2025', end: '12/09/2025', turno: 'Manh√£', details: '' },
            { subject: 'Traumatologia', hospital: 'Hospital Zubizarreta', start: '15/09/2025', end: '03/10/2025', turno: 'Manh√£', details: 'F.P.' },
            { subject: 'Oftalmologia', hospital: 'Hospital Zubizarreta', start: '13/10/2025', end: '24/10/2025', turno: 'Manh√£', details: '' },
            { subject: 'Otorrinolaringologia', hospital: 'Hospital Zubizarreta', start: '03/11/2025', end: '14/11/2025', turno: 'Manh√£', details: '' },
            { subject: 'Obstetr√≠cia', hospital: 'Hospital Zubizarreta', start: '17/11/2025', end: '19/12/2025', turno: 'Manh√£', details: '' },
            { subject: 'Traumatologia', hospital: 'Larcade', start: '04/08/2025', end: '22/08/2025', turno: 'Vespertina', details: '' },
            { subject: 'Medicina B', hospital: 'STA BARBARA', start: '11/08/2025', end: '19/12/2025', turno: 'Vespertina', details: '' },
            { subject: 'Diagn√≥stico por Im√°genes', hospital: 'STA BARBARA', start: '11/08/2025', end: '22/08/2025', turno: 'Vespertina', details: '' },
            { subject: 'Infectologia', hospital: 'STA BARBARA', start: '11/08/2025', end: '05/09/2025', turno: 'Vespertina', details: '' },
            { subject: 'Neumonologia', hospital: 'Vacarezza', start: '11/08/2025', end: '22/08/2025', turno: 'Vespertina', details: '' },
            { subject: 'Dermatologia', hospital: 'HTAL MILSTEIN', start: '11/08/2025', end: '29/08/2025', turno: 'Vespertina', details: '' },
            { subject: 'Otorrinolaringologia', hospital: 'HTAL. SANTOJANNI', start: '18/08/2025', end: '29/08/2025', turno: 'Vespertina', details: '' },
            { subject: 'Oftalmologia', hospital: 'HTAL. SANTOJANNI', start: '18/08/2025', end: '29/08/2025', turno: 'Vespertina', details: '' },
            { subject: 'Obstetr√≠cia', hospital: 'HTAL RAMOS MEJIA', start: '01/09/2025', end: '04/10/2025', turno: 'Vespertina', details: '' },
            { subject: 'Diagn√≥stico por Im√°genes', hospital: 'LARCADE', start: '01/09/2025', end: '12/09/2025', turno: 'Vespertina', details: '' },
            { subject: 'Oftalmologia', hospital: 'HTAL RAMOS MEJIA', start: '01/09/2025', end: '12/09/2025', turno: 'Vespertina', details: '' },
            { subject: 'Otorrinolaringologia', hospital: 'DURAND', start: '01/09/2025', end: '12/09/2025', turno: 'Vespertina', details: '' },
            { subject: 'Psiquiatria', hospital: 'HTAL MILSTEIN', start: '01/09/2025', end: '26/09/2025', turno: 'Vespertina', details: '' },
            { subject: 'Infectologia', hospital: 'STA BARBARA', start: '08/09/2025', end: '03/10/2025', turno: 'Vespertina', details: '' },
            { subject: 'Neurologia', hospital: 'STA BARBARA', start: '08/09/2025', end: '26/09/2025', turno: 'Vespertina', details: '' },
            { subject: 'Psiquiatria', hospital: 'HOSP. FERNANDEZ', start: '08/09/2025', end: '03/10/2025', turno: 'Vespertina', details: '' },
            { subject: 'Urologia', hospital: 'HTAL CLINICAS', start: '15/09/2025', end: '26/09/2025', turno: 'Vespertina', details: '' },
            { subject: 'Cirurgia Geral', hospital: 'HTAL MILSTEIN', start: '29/09/2025', end: '28/11/2025', turno: 'Vespertina', details: '' },
            { subject: 'Otorrinolaringologia', hospital: 'HTAL. SANTOJANNI', start: '06/10/2025', end: '17/10/2025', turno: 'Vespertina', details: '' },
            { subject: 'Neurologia', hospital: 'STA BARBARA', start: '06/10/2025', end: '24/10/2025', turno: 'Vespertina', details: '' },
            { subject: 'Ginecologia', hospital: 'HTAL. RAMOS MEJIA', start: '13/10/2025', end: '14/11/2025', turno: 'Vespertina', details: '' },
            { subject: 'Infectologia', hospital: 'STA BARBARA', start: '13/10/2025', end: '07/10/2025', turno: 'Vespertina', details: '' },
            { subject: 'Neurocirurgia', hospital: 'LARCADE', start: '20/10/2025', end: '31/10/2025', turno: 'Vespertina', details: '' },
            { subject: 'Obstetr√≠cia', hospital: 'HTAL. SANTOJANNI', start: '20/10/2025', end: '31/10/2025', turno: 'Vespertina', details: '' },
            { subject: 'Dermatologia', hospital: 'HTAL. SANTOJANNI', start: '20/10/2025', end: '07/11/2025', turno: 'Vespertina', details: '' },
            { subject: 'Ginecologia', hospital: 'HTAL. POSADAS', start: '27/10/2025', end: '28/11/2025', turno: 'Vespertina', details: '' },
            { subject: 'Neumonologia', hospital: 'STA BARBARA', start: '03/11/2025', end: '14/11/2025', turno: 'Vespertina', details: '' },
            { subject: 'Neurocirurgia', hospital: 'LARCADE', start: '03/11/2025', end: '14/11/2025', turno: 'Vespertina', details: '' },
            { subject: 'Urologia', hospital: 'HTAL CLINICAS', start: '03/11/2025', end: '14/11/2025', turno: 'Vespertina', details: '' },
            { subject: 'Infectologia', hospital: 'STA BARBARA', start: '10/11/2025', end: '05/12/2025', turno: 'Vespertina', details: '' },
            { subject: 'Nutri√ß√£o', hospital: 'STA BARBARA', start: '10/11/2025', end: '21/11/2025', turno: 'Vespertina', details: '' },
            { subject: 'Traumatologia', hospital: 'LARCADE', start: '10/11/2025', end: '28/11/2025', turno: 'Vespertina', details: '' },
            { subject: 'Obstetr√≠cia', hospital: 'HTAL RAMOS MEJIA', start: '17/11/2025', end: '19/12/2025', turno: 'Vespertina', details: '' },
            { subject: 'Diagn√≥stico por Im√°genes', hospital: 'LARCADE', start: '24/11/2025', end: '05/12/2025', turno: 'Vespertina', details: '' },
        ];

        // --- Vari√°veis Globais ---
        // Armazena as cursadas selecionadas pelo usu√°rio, persistindo no localStorage
        let selectedCourses = JSON.parse(localStorage.getItem('selectedCourses')) || [];
        // Armazena as prefer√™ncias do usu√°rio para cada cursada (Pode Cursar, N√£o Pode Cursar, Priorit√°ria)
        let userCoursePreferences = JSON.parse(localStorage.getItem('userCoursePreferences')) || {};
        
        // --- Fun√ß√µes Auxiliares de Data ---
        // Converte uma string de data (DD/MM/AAAA) para um objeto Date
        function parseDate(dateString) {
            const [day, month, year] = dateString.split('/').map(Number);
            return new Date(year, month - 1, day); // M√™s √© 0-indexado no JavaScript
        }

        // Formata um objeto Date para uma string (DD/MM/AAAA)
        function formatDate(date) {
            return date.toLocaleDateString('pt-BR', { day: '2-digit', month: '2-digit', year: 'numeric' });
        }

        // Fun√ß√£o para verificar sobreposi√ß√£o de datas e turnos entre duas cursadas
        function checkConflict(course1, course2) {
            const start1 = parseDate(course1.start);
            const end1 = parseDate(course1.end);
            const start2 = parseDate(course2.start);
            const end2 = parseDate(course2.end);

            // Verifica sobreposi√ß√£o de datas: (in√≠cio1 <= fim2) E (fim1 >= in√≠cio2)
            const datesOverlap = (start1 <= end2 && end1 >= start2);

            // Verifica sobreposi√ß√£o de turnos: se os turnos s√£o os mesmos
            const turnosOverlap = course1.turno === course2.turno;

            return datesOverlap && turnosOverlap;
        }

        // --- Fun√ß√µes de Renderiza√ß√£o ---

        // Renderiza a lista de cursadas (filtrada por mat√©ria) em formato de tabela
        function renderCourseList(coursesToRender) {
            const courseListBody = document.getElementById('courseListBody');
            if (!courseListBody) {
                console.error("Erro: Elemento #courseListBody n√£o encontrado!");
                return;
            }
            console.log("renderCourseList chamada com", coursesToRender.length, "cursadas.");
            courseListBody.innerHTML = ''; // Limpa o conte√∫do anterior da tabela

            if (coursesToRender.length === 0) {
                console.log("Nenhuma cursada para renderizar. Exibindo mensagem padr√£o.");
                courseListBody.innerHTML = '<tr><td colspan="7" class="text-center text-gray-600 py-4">Selecione uma mat√©ria para ver as op√ß√µes de cursada.</td></tr>';
                return;
            }

            const fragment = document.createDocumentFragment(); // Cria um DocumentFragment para otimiza√ß√£o

            coursesToRender.forEach(course => {
                // Cria um ID √∫nico para a cursada para f√°cil refer√™ncia
                const courseId = `${course.subject}-${course.hospital}-${course.start}-${course.end}-${course.turno}`.replace(/[^a-zA-Z0-9-]/g, '');
                // Verifica se a cursada j√° est√° selecionada
                const isSelected = selectedCourses.some(sc => sc.id === courseId);
                // Obt√©m a prefer√™ncia do usu√°rio para esta cursada, padr√£o √© 'Pode Cursar'
                const userPreference = userCoursePreferences[courseId] || 'Pode Cursar';

                const row = document.createElement('tr');
                row.id = courseId;
                // Aplica a classe 'selected' se a cursada j√° estiver no cronograma do usu√°rio
                row.className = `${isSelected ? 'selected' : ''}`; 

                // Cria as c√©lulas da linha explicitamente para melhor performance
                const subjectTd = document.createElement('td');
                subjectTd.textContent = course.subject;
                row.appendChild(subjectTd);

                const hospitalTd = document.createElement('td');
                hospitalTd.textContent = course.hospital;
                row.appendChild(hospitalTd);

                const periodTd = document.createElement('td');
                periodTd.textContent = `${formatDate(parseDate(course.start))} a ${formatDate(parseDate(course.end))}`;
                row.appendChild(periodTd);

                const turnoTd = document.createElement('td');
                turnoTd.textContent = course.turno;
                row.appendChild(turnoTd);

                const detailsTd = document.createElement('td');
                detailsTd.textContent = course.details || '-';
                row.appendChild(detailsTd);

                // C√©lula de Prefer√™ncia com o seletor
                const preferenceCell = document.createElement('td');
                const preferenceSelect = document.createElement('select');
                preferenceSelect.className = 'preference-select';
                preferenceSelect.dataset.courseId = courseId; // Armazena o ID para refer√™ncia
                preferenceSelect.dataset.courseData = JSON.stringify(course); // Armazena os dados completos

                ['Pode Cursar', 'N√£o Pode Cursar', 'Priorit√°ria'].forEach(optionText => {
                    const option = document.createElement('option');
                    option.value = optionText;
                    option.textContent = optionText;
                    if (userPreference === optionText) {
                        option.selected = true;
                    }
                    preferenceSelect.appendChild(option);
                });

                preferenceSelect.addEventListener('change', (event) => {
                    const changedCourseId = event.target.dataset.courseId;
                    const changedCourseData = JSON.parse(event.target.dataset.courseData);
                    userCoursePreferences[changedCourseId] = event.target.value;
                    localStorage.setItem('userCoursePreferences', JSON.stringify(userCoursePreferences));
                    console.log(`Prefer√™ncia para ${changedCourseData.subject} (${changedCourseData.hospital}) atualizada para: ${event.target.value}`);
                    // Atualiza o estado do bot√£o "Selecionar"
                    const addButton = document.querySelector(`#${changedCourseId} .add-button`);
                    if (addButton) {
                        addButton.disabled = (event.target.value === 'N√£o Pode Cursar');
                    }
                    // Se a prefer√™ncia for "N√£o Pode Cursar" e a cursada estiver selecionada, remove-a
                    if (event.target.value === 'N√£o Pode Cursar' && isSelected) {
                        toggleCourseSelection(changedCourseData, changedCourseId); // Isso remover√° e atualizar√°
                    } else {
                        updateSelectedCoursesDisplay(); // Apenas atualiza a exibi√ß√£o para reavaliar conflitos
                    }
                });

                preferenceCell.appendChild(preferenceSelect);
                row.appendChild(preferenceCell);

                // Cria a c√©lula de a√ß√£o e o bot√£o separadamente para anexar o event listener
                const actionCell = document.createElement('td');
                const button = document.createElement('button');
                button.className = 'add-button';
                button.textContent = isSelected ? 'Remover' : 'Selecionar';
                button.dataset.courseId = courseId; 
                button.dataset.courseData = JSON.stringify(course); 
                button.disabled = (userPreference === 'N√£o Pode Cursar'); // Desabilita se for "N√£o Pode Cursar"

                actionCell.appendChild(button);
                row.appendChild(actionCell);

                fragment.appendChild(row); // Adiciona a linha ao fragmento
            });

            courseListBody.appendChild(fragment); // Anexa o fragmento ao DOM de uma vez

            // Adiciona event listeners a todos os bot√µes 'add-button' rec√©m-criados
            courseListBody.querySelectorAll('.add-button').forEach(button => {
                button.addEventListener('click', (event) => {
                    const courseId = event.target.dataset.courseId;
                    const courseData = JSON.parse(event.target.dataset.courseData); 
                    toggleCourseSelection(courseData, courseId);
                });
            });

            updateSelectedCoursesDisplay();
        }

        // Atualiza a exibi√ß√£o das cursadas selecionadas e verifica conflitos em formato de tabela
        function updateSelectedCoursesDisplay() {
            const selectedCoursesBody = document.getElementById('selectedCoursesBody');
            if (!selectedCoursesBody) {
                console.error("Erro: Elemento #selectedCoursesBody n√£o encontrado!");
                return;
            }
            console.log("updateSelectedCoursesDisplay chamada. Cursadas selecionadas:", selectedCourses.length);
            selectedCoursesBody.innerHTML = ''; // Limpa o conte√∫do anterior da tabela de selecionadas

            if (selectedCourses.length === 0) {
                selectedCoursesBody.innerHTML = '<tr><td colspan="7" class="text-center text-gray-600 py-4">Nenhuma cursada selecionada ainda.</td></tr>';
                return;
            }

            // Ordena as cursadas selecionadas cronologicamente para melhor visualiza√ß√£o
            selectedCourses.sort((a, b) => parseDate(a.start) - parseDate(b.start));

            // Para cada cursada selecionada, cria uma linha na tabela de selecionadas
            selectedCourses.forEach(selectedCourse => {
                const row = document.createElement('tr');
                row.className = ''; // Reseta as classes para reavaliar conflitos

                let conflictMessage = '';
                let hasConflict = false;

                // Obt√©m a prefer√™ncia do usu√°rio para esta cursada, padr√£o √© 'Pode Cursar'
                const userPreference = userCoursePreferences[selectedCourse.id] || 'Pode Cursar';

                // Verifica conflitos com CADA UMA das outras cursadas j√° selecionadas
                selectedCourses.forEach(otherCourse => {
                    if (selectedCourse.id !== otherCourse.id && checkConflict(selectedCourse, otherCourse)) {
                        hasConflict = true;
                        // Constr√≥i a mensagem de conflito detalhada
                        conflictMessage += `Conflito com: ${otherCourse.subject} (${otherCourse.hospital}, ${otherCourse.turno}, ${formatDate(parseDate(otherCourse.start))} - ${formatDate(parseDate(otherCourse.end))})<br>`;
                    }
                });

                // Aplica a classe CSS de acordo com a exist√™ncia de conflitos
                if (hasConflict) {
                    row.classList.add('conflict'); // Vermelho
                } else {
                    row.classList.add('selected'); // Verde
                }

                // Preenche as c√©lulas da linha da tabela de selecionadas
                row.innerHTML = `
                    <td>${selectedCourse.subject}</td>
                    <td>${selectedCourse.hospital}</td>
                    <td>${formatDate(parseDate(selectedCourse.start))} a ${formatDate(parseDate(selectedCourse.end))}</td>
                    <td>${selectedCourse.turno}</td>
                    <td>
                        <select class="preference-select" data-course-id="${selectedCourse.id}" data-course-data='${JSON.stringify(selectedCourse)}'>
                            <option value="Pode Cursar" ${userPreference === 'Pode Cursar' ? 'selected' : ''}>Pode Cursar</option>
                            <option value="N√£o Pode Cursar" ${userPreference === 'N√£o Pode Cursar' ? 'selected' : ''}>N√£o Pode Cursar</option>
                            <option value="Priorit√°ria" ${userPreference === 'Priorit√°ria' ? 'selected' : ''}>Priorit√°ria</option>
                        </select>
                    </td>
                    <td>
                        ${hasConflict ? `<span class="conflict-message">${conflictMessage}</span>` : 'Nenhum conflito'}
                    </td>
                    <td>
                        <button class="remove-button" data-course-id="${selectedCourse.id}">Remover</button>
                    </td>
                `;
                selectedCoursesBody.appendChild(row);
            });

            // Adiciona event listeners para os bot√µes "Remover" nas cursadas selecionadas
            selectedCoursesBody.querySelectorAll('.remove-button').forEach(button => {
                button.addEventListener('click', (event) => {
                    const courseIdToRemove = event.target.dataset.courseId;
                    const courseToRemove = selectedCourses.find(c => c.id === courseIdToRemove);
                    if (courseToRemove) {
                        toggleCourseSelection(courseToRemove, courseIdToRemove);
                    }
                });
            });

            // Adiciona event listeners para os seletores de prefer√™ncia na tabela de selecionadas
            selectedCoursesBody.querySelectorAll('.preference-select').forEach(select => {
                select.addEventListener('change', (event) => {
                    const changedCourseId = event.target.dataset.courseId;
                    const changedCourseData = JSON.parse(event.target.dataset.courseData);
                    userCoursePreferences[changedCourseId] = event.target.value;
                    localStorage.setItem('userCoursePreferences', JSON.stringify(userCoursePreferences));
                    console.log(`Prefer√™ncia para ${changedCourseData.subject} (${changedCourseData.hospital}) na tabela de selecionadas atualizada para: ${event.target.value}`);

                    // Se a prefer√™ncia for "N√£o Pode Cursar" e a cursada estiver selecionada, remove-a
                    if (event.target.value === 'N√£o Pode Cursar') {
                        toggleCourseSelection(changedCourseData, changedCourseId); // Isso remover√° e atualizar√°
                    } else {
                        updateSelectedCoursesDisplay(); // Apenas atualiza a exibi√ß√£o para reavaliar conflitos
                    }

                    // Re-renderiza a lista principal para que os bot√µes "Selecionar/Remover" reflitam o novo estado
                    const currentSelectedSubject = document.getElementById('subjectSelect').value;
                    if (currentSelectedSubject) {
                        const filteredCourses = allCoursesData.filter(course => course.subject === currentSelectedSubject);
                        renderCourseList(filteredCourses);
                    }
                });
            });
        }

        // Adiciona ou remove uma cursada da lista de selecionadas
        function toggleCourseSelection(course, courseId) {
            const index = selectedCourses.findIndex(c => c.id === courseId);
            if (index > -1) {
                // Se j√° estiver selecionada, remove
                selectedCourses.splice(index, 1);
                console.log(`Cursada removida: ${course.subject}`);
            } else {
                // Se n√£o estiver selecionada, adiciona
                const newCourse = { ...course, id: courseId }; // Cria uma c√≥pia e adiciona o ID
                selectedCourses.push(newCourse);
                console.log(`Cursada adicionada: ${course.subject}`);
            }
            // Salva a lista atualizada no localStorage para persist√™ncia
            localStorage.setItem('selectedCourses', JSON.stringify(selectedCourses));
            updateSelectedCoursesDisplay(); // Atualiza a exibi√ß√£o e verifica conflitos novamente

            // OTIMIZA√á√ÉO: Atualiza diretamente o status da linha na tabela principal
            const mainListRow = document.getElementById(courseId);
            if (mainListRow) {
                const addButton = mainListRow.querySelector('.add-button');
                if (addButton) {
                    const isSelectedNow = selectedCourses.some(sc => sc.id === courseId);
                    addButton.textContent = isSelectedNow ? 'Remover' : 'Selecionar';
                    mainListRow.classList.toggle('selected', isSelectedNow);
                    // Garante que o bot√£o 'Selecionar' permanece desabilitado se a prefer√™ncia for 'N√£o Pode Cursar'
                    const userPreference = userCoursePreferences[courseId] || 'Pode Cursar';
                    addButton.disabled = (userPreference === 'N√£o Pode Cursar');
                    console.log(`Status da linha principal atualizado para ${isSelectedNow ? 'selecionado' : 'n√£o selecionado'}.`);
                }
            }
        }

        // Popula o menu suspenso de sele√ß√£o de mat√©rias com todas as mat√©rias √∫nicas
        function populateSubjectSelect() {
            const subjectSelect = document.getElementById('subjectSelect');
            if (!subjectSelect) {
                console.error("Erro: Elemento #subjectSelect n√£o encontrado!");
                return;
            }
            // Limpa as op√ß√µes existentes antes de popular
            subjectSelect.innerHTML = '<option value="">-- Selecione uma Mat√©ria --</option>'; 
            // Extrai mat√©rias √∫nicas e as ordena alfabeticamente
            const subjects = [...new Set(allCoursesData.map(course => course.subject))].sort();
            console.log("Mat√©rias √∫nicas encontradas:", subjects.length);
            subjects.forEach(subject => {
                const option = document.createElement('option');
                option.value = subject;
                option.textContent = subject;
                subjectSelect.appendChild(option);
            });
        }

        // Exibe as cursadas filtradas pela mat√©ria selecionada
        function displayCoursesBySubject() {
            const subjectSelect = document.getElementById('subjectSelect');
            if (!subjectSelect) {
                console.error("Erro: Elemento #subjectSelect n√£o encontrado ao tentar exibir cursadas por mat√©ria!");
                return;
            }
            const selectedSubject = subjectSelect.value;
            console.log("displayCoursesBySubject chamada. Mat√©ria selecionada:", selectedSubject);
            let filtered = [];
            if (selectedSubject) {
                filtered = allCoursesData.filter(course => course.subject === selectedSubject);
                console.log(`Mat√©ria selecionada: "${selectedSubject}", Cursadas encontradas: ${filtered.length}`); 
            } else {
                console.log("Nenhuma mat√©ria selecionada. Exibindo mensagem padr√£o."); 
            }
            renderCourseList(filtered);
        }

        // --- Fun√ß√£o de Otimiza√ß√£o de Cronograma ---
        function generateOptimizedSchedule() {
            console.log("Iniciando gera√ß√£o de cronograma otimizado...");

            const optimizationStatusDiv = document.getElementById('optimizationStatus');
            if (!optimizationStatusDiv) {
                console.error("Erro: Elemento #optimizationStatus n√£o encontrado!");
                return;
            }
            optimizationStatusDiv.className = "mt-4 p-3 rounded-lg text-center text-sm font-semibold bg-blue-100 text-blue-800";
            optimizationStatusDiv.textContent = "Calculando o cronograma ideal...";

            // 1. Obter as mat√©rias √∫nicas que o usu√°rio DESEJA agendar (baseado nas suas sele√ß√µes atuais)
            // Se n√£o houver mat√©rias selecionadas, considera todas as mat√©rias √∫nicas do allCoursesData
            const desiredSubjects = selectedCourses.length > 0 
                ? new Set(selectedCourses.map(course => course.subject))
                : new Set(allCoursesData.map(course => course.subject));
            
            console.log("Mat√©rias desejadas para agendamento:", Array.from(desiredSubjects).join(', '));

            // 2. Preparar cursos candidatos, FILTRANDO por 'N√£o Pode Cursar' e 'CONSEGUIDA'
            const candidateCoursesPool = allCoursesData.filter(course => {
                const courseId = `${course.subject}-${course.hospital}-${course.start}-${course.end}-${course.turno}`.replace(/[^a-zA-Z0-9-]/g, '');
                const preference = userCoursePreferences[courseId] || 'Pode Cursar';
                // Exclui cursos marcados como 'N√£o Pode Cursar' e os j√° 'CONSEGUIDA'
                return preference !== 'N√£o Pode Cursar' && !course.details.includes('CONSEGUIDA.');
            });
            console.log("Cursos candidatos ap√≥s filtrar 'N√£o Pode Cursar' e 'CONSEGUIDA':", candidateCoursesPool.length);


            // 3. Inicializar o cronograma otimizado e um set para mat√©rias j√° agendadas
            let tempOptimizedSchedule = [];
            let scheduledSubjects = new Set();

            // 4. Para cada mat√©ria desejada, tentar encontrar a melhor cursada sem conflitos
            for (const subject of desiredSubjects) {
                // Filtrar apenas os cursos para a mat√©ria atual do pool de candidatos
                const subjectCandidates = candidateCoursesPool.filter(course => course.subject === subject);

                // Ordenar os candidatos da mat√©ria atual: 
                // 1¬∫ Priorit√°ria, 2¬∫ por data de in√≠cio, 3¬∫ por turno (Manh√£ primeiro)
                subjectCandidates.sort((a, b) => {
                    const courseIdA = `${a.subject}-${a.hospital}-${a.start}-${a.end}-${a.turno}`.replace(/[^a-zA-Z0-9-]/g, '');
                    const courseIdB = `${b.subject}-${b.hospital}-${b.start}-${b.end}-${b.turno}`.replace(/[^a-zA-Z0-9-]/g, '');
                    const preferenceA = userCoursePreferences[courseIdA] || 'Pode Cursar';
                    const preferenceB = userCoursePreferences[courseIdB] || 'Pode Cursar';

                    // Prioridade: 'Priorit√°ria' vem antes de 'Pode Cursar'
                    if (preferenceA === 'Priorit√°ria' && preferenceB !== 'Priorit√°ria') return -1;
                    if (preferenceA !== 'Priorit√°ria' && preferenceB === 'Priorit√°ria') return 1;

                    // Em caso de mesma prioridade, ordenar por data e turno
                    const dateA = parseDate(a.start);
                    const dateB = parseDate(b.start);
                    if (dateA - dateB !== 0) {
                        return dateA - dateB;
                    }
                    if (a.turno === 'Manh√£' && b.turno !== 'Manh√£') return -1;
                    if (a.turno !== 'Manh√£' && b.turno === 'Manh√£') return 1;
                    return 0;
                });

                let foundCourseForSubject = false;
                for (const course of subjectCandidates) {
                    const courseId = `${course.subject}-${course.hospital}-${course.start}-${course.end}-${course.turno}`.replace(/[^a-zA-Z0-9-]/g, '');
                    const courseWithId = { ...course, id: courseId };

                    let canAdd = true;
                    // Verifica conflito com os cursos j√° no cronograma otimizado
                    for (const scheduledCourse of tempOptimizedSchedule) {
                        if (checkConflict(courseWithId, scheduledCourse)) {
                            canAdd = false;
                            break;
                        }
                    }

                    if (canAdd) {
                        tempOptimizedSchedule.push(courseWithId);
                        scheduledSubjects.add(subject);
                        foundCourseForSubject = true;
                        console.log(`Adicionado ao cronograma otimizado: ${course.subject} (${course.hospital})`);
                        break; // Encontrou uma op√ß√£o para esta mat√©ria, passa para a pr√≥xima mat√©ria desejada
                    }
                }

                if (!foundCourseForSubject) {
                    console.warn(`N√£o foi poss√≠vel encontrar uma cursada sem conflitos para a mat√©ria: ${subject}`);
                }
            }

            // 5. Atualiza a vari√°vel global selectedCourses e o localStorage com o cronograma otimizado
            selectedCourses = tempOptimizedSchedule;
            localStorage.setItem('selectedCourses', JSON.stringify(selectedCourses));
            
            // 6. Atualiza a exibi√ß√£o das tabelas
            updateSelectedCoursesDisplay();
            // Re-renderiza a lista principal para que os bot√µes "Selecionar/Remover" reflitam o novo estado
            const currentSelectedSubject = document.getElementById('subjectSelect').value;
            if (currentSelectedSubject) {
                const filteredCourses = allCoursesData.filter(course => course.subject === currentSelectedSubject);
                renderCourseList(filteredCourses);
            } else {
                // Se nenhuma mat√©ria estiver selecionada no dropdown, limpa a lista principal
                document.getElementById('courseListBody').innerHTML = '<tr><td colspan="7" class="text-center text-gray-600 py-4">Selecione uma mat√©ria para ver as op√ß√µes de cursada.</td></tr>';
            }

            console.log("Gera√ß√£o de cronograma otimizado conclu√≠da.");
            console.log("Mat√©rias agendadas no cronograma otimizado:", scheduledSubjects.size);

            // Mensagem de status final
            let allDesiredSubjectsScheduled = true;
            const missingSubjects = Array.from(desiredSubjects).filter(subject => !scheduledSubjects.has(subject));
            if (missingSubjects.length > 0) {
                allDesiredSubjectsScheduled = false;
            }

            if (allDesiredSubjectsScheduled) {
                optimizationStatusDiv.className = "mt-4 p-3 rounded-lg text-center text-sm font-semibold bg-green-100 text-green-800";
                optimizationStatusDiv.textContent = "Cronograma otimizado gerado com sucesso para TODAS as mat√©rias selecionadas sem conflitos!";
            } else {
                optimizationStatusDiv.className = "mt-4 p-3 rounded-lg text-center text-sm font-semibold bg-yellow-100 text-yellow-800";
                optimizationStatusDiv.innerHTML = `ATEN√á√ÉO: N√£o foi poss√≠vel incluir TODAS as mat√©rias desejadas sem conflitos. Mat√©rias n√£o agendadas: ${missingSubjects.join(', ')}.`;
            }
        }

        // --- Event Listeners ---
        // Executa quando o DOM estiver completamente carregado
        document.addEventListener('DOMContentLoaded', () => {
            console.log("DOM completamente carregado.");
            populateSubjectSelect(); // Preenche o seletor de mat√©rias
            updateSelectedCoursesDisplay(); // Carrega e exibe as cursadas selecionadas ao carregar a p√°gina

            // Event listener para a mudan√ßa no seletor de mat√©ria
            const subjectSelect = document.getElementById('subjectSelect');
            if (subjectSelect) {
                subjectSelect.addEventListener('change', (event) => {
                    console.log("Evento 'change' no seletor de mat√©ria disparado. Novo valor:", event.target.value);
                    displayCoursesBySubject();
                });
            } else {
                console.error("Erro: Elemento #subjectSelect n√£o encontrado para anexar o event listener.");
            }

            // Event listener para o bot√£o de otimiza√ß√£o
            const optimizeButton = document.getElementById('optimizeScheduleButton');
            if (optimizeButton) {
                optimizeButton.addEventListener('click', generateOptimizedSchedule);
            } else {
                console.error("Erro: Elemento #optimizeScheduleButton n√£o encontrado.");
            }
        });
    </script>
</body>
</html>
